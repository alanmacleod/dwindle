(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='/',b(b.s=1)})([function(a,b,c){'use strict';function d(a){if(!Array.isArray(a))throw new Error(i);if(0!=a.length){var b=a[0];if(!Array.isArray(b))throw new Error(i);if(2!=b.length)throw new Error(i);if(isNaN(b[0]))throw new Error(i);this.rebuild(a)}}var e=Math.sqrt,f=Math.max,g=Math.min,h=c(2),i='Expected: array of numerical coordinate arrays, e.g. [[0,1],[1,1],[1,0]]';a.exports=d,d.prototype={simplify:function(a){var d=this;if(a.area)return this.points.filter(function(b,c){return c<d.minpoint||c>d.maxpoint||d.meta[c].area>=a.area});if(a.target||a.percent){var b=f(g(a.percent,100),0),e=b?b/100*this.points.length>>0:a.target;e=g(this.maxpoint+1,e),e=f(e,2);for(var j=new h(null,function(c,a){return d.meta[c].area<d.meta[a].area}),k=new h,l=this.minpoint;l<=this.maxpoint;l++)j.push(l);var i=[],m=e;for(i.push(this.points[0]),i.push(this.points[this.maxpoint+1]),m=e-2;m--;)k.push(j.pop());for(m=e-2;m--;)i.push(this.points[k.pop()]);return i}},rebuild:function(a){var c=this;this.meta=[],this.points=a,this.q=new h(null,function(d,a){return c.meta[d].area>c.meta[a].area}),this.minpoint=1,this.maxpoint=this.points.length-2,this.minarea=0,this.maxarea=0,this.init(),this.dwindle()},dwindle:function(){var a;for(this.minarea=Number.MAX_VALUE,this.maxarea=-1;a=this.q.pop();){var b=this.meta[a].prev,c=this.meta[a].next;0<this.meta[a].area&&(this.minarea=g(this.minarea,this.meta[a].area)),this.maxarea=f(this.maxarea,this.meta[a].area),b>=this.minpoint&&(this.meta[b].next=c,this.meta[b].area=this.recalc(b)),c<=this.maxpoint&&(this.meta[c].prev=b,this.meta[c].area=this.recalc(c))}},recalc:function(b){var c=this.meta[b].prev,d=this.meta[b].next,e=this.area([this.points[c],this.points[b],this.points[d]]);return isNaN(e)?0:e},init:function(){for(var a=1;a<this.points.length-1;a++){var b=this.points[a],c={prev:a-1,next:a+1,area:this.area([this.points[a-1],b,this.points[a+1]])};isNaN(c.area)&&(c.area=0),this.meta[a]=c,this.q.push(a)}},area:function(d){var f=this.dist(d[0],d[1]),a=this.dist(d[1],d[2]),b=this.dist(d[2],d[0]),c=(f+a+b)/2;return e(c*(c-f)*(c-a)*(c-b))},dist:function(c,a){var b=a[0]-c[0],d=a[1]-c[1];return e(b*b+d*d)}}},function(a,b,c){'use strict';var d,e,f,g=c(0),h=window.L,i=document.getElementById('map'),j=document.getElementById('info'),k=h.map(i).setView([52.522032,13.412718],6);j.innerHTML='Loading test data, please wait...',h.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{}).addTo(k),fetch('./data/de.4326.geo.json').then(function(a){return a.json()}).then(function(a){f=a.features[0].geometry.coordinates[90][0],d=new g(f),e=h.polygon(f.map(function(a){return[a[1],a[0]]})).addTo(k),k.fitBounds(e.getBounds()),j.innerHTML='Ready!'});k.on('mousemove',function(a){if(d){var b=a.containerPoint.x,c=b/i.clientWidth,g=d.minarea*Math.pow(d.maxarea/d.minarea,0.5+c/2),l=d.simplify({area:g});if(!(6>l.length)){e&&e.remove();var m=(100*(l.length/f.length)).toFixed(2);j.innerHTML='<b>'+l.length+' points ('+m+'%)</b>',e=h.polygon(l.map(function(a){return[a[1],a[0]]})).addTo(k)}}})},function(a){function b(a,b){this.tree=a?65536>a?256>a?new Uint8Array(a):new Uint16Array(a):new Uint32Array(a):[0],this.p=+!!(this.cmp=b||((c,a)=>c>a)),this.peek=function(){return this.tree[1]},this.length=function(){return this.p-1}}a.exports=b,b.prototype={push:function(a){let b,d,e=this.p++,f=this.tree,g=this.cmp;for(;0<(b=e>>1)&&(d=f[b],!g(a,d));)f[e]=d,e=b;f[e]=a},pop:function(){if(1==this.p)return null;let a,d,e=this.tree,f=this.cmp,c=--this.p,g=e[1],h=e[c],b=1;for(;(a=b<<1)<c&&(a+1<=c&&f(e[a],e[a+1])&&a++,d=e[a],!f(d,h));)e[b]=d,b=a;return e[b]=h,g}}}]);